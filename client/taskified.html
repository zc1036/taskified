<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="stylesheet" href="simplemde.min.css">
        <link rel="stylesheet" href="taskified.css">
        <script src="vue.js"></script>
        <script src="FileSaver.js"></script>
        <script src="marked.min.js"></script>
        <script src="simplemde.min.js"></script>
        <title>Taskified</title>
    </head>
    <body>
        <div id="app-container">
            <div id="app">
                <div class="header-container">
                    <div></div>
                    <div :ref="'docTitle'"
                         contentEditable="true"
                         spellcheck="false"
                         @focus="startUpdatingDocTitle"
                         @blur="updateDocumentTitle">
                        {{state.documentTitle}}
                    </div>
                    <div></div>
                </div>
                <div
                    class="taskitem"
                    v-for="todo in state.todos"
                    v-bind:class="{ active: todo.selected }"
                    :ref="'badges_' + todo.uid"
                    @mousedown="e => (handleItemClick(todo, e.ctrlKey), e.stopPropagation())">
                    <div class="todo-state">{{todo.status}}</div>
                    <div class="todo-content-container">
                        <div v-html="todo.rendered"
                             v-if="!todo.editable"
                             class="todo-render">
                        </div>
                        <div v-if="todo.editable" class="todo-editor-container">
                            <simplemde class="todo-editor"
                                       :ref="'textareas_' + todo.uid"
                                       @notify="handleEditorChange(todo)"
                                       v-model="todo.original">
                            </simplemde>
                        </div>
                    </div>
                    <div class="todo-date">
                        {{formatDate(todo.createDate)}}<br />
                        <span v-if="todo.modified"><span style="position: absolute; transform: translateX(-100%)">(</span>{{formatDate(todo.modDate)}})</span>
                    </div>
                </div>
            </div>
            <div id="statusbar-container">
                <div v-if="activeStatusShortcuts.length > 0" id="statusbar">
                    <div class="statusbar-option" v-for="option in activeStatusShortcuts">
                        {{option.shortcut}}: {{option.pretty || option.text}}
                    </div>
                </div>
            </div>
        </div>
        <script src="taskified.js"></script>
    </body>
</html>
